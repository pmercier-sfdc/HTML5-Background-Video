/*
* Zepto/jQuery Background video plugin
* ---
* Copyright 2013, Pascal Mercier (salesforce.com) 
* Inspired/Built based on Victor Coulon's JQuery plugin
* (http://victorcoulon.fr)
*/
!function(a){a.backgroundVideo=function(b,c){var d={videoid:"video_background",position:"fixed"},e=this;e.settings={};var f=function(){e.settings=a.extend({},d,c),e.el=b,g()},g=function(){var b="";b+='<video id="'+e.settings.videoid+'" preload="auto" autoplay="autoplay" loop="true"',b+='style="display:none;position:'+e.settings.position+';top:0;left:0;bottom:0;right:0;width:100%;height:100%;z-index:-1">';for(var c=0;c<e.settings.types.length;c++)b+='<source src="'+e.settings.path+e.settings.filename+"."+e.settings.types[c]+'" type="video/'+e.settings.types[c]+'" />';b+="bgvideo</video>",e.el.prepend(b),a("#"+e.settings.videoid).show(),h()},h=function(){var b=i();console.log("original width/height: "+e.settings.width+" / "+e.settings.height),console.log(a("#"+e.settings.videoid)),a("#"+e.settings.videoid).width(b*e.settings.width),a("#"+e.settings.videoid).height(b*e.settings.height),console.log("video width/height: "+a("#"+e.settings.videoid).width()+" / "+a("#"+e.settings.videoid).height()),"undefined"!=typeof e.settings.align&&j()},i=function(){console.log("video container width/height: "+e.el.width()+" / "+e.el.height());var a=e.el.width(),b=e.el.height(),c=a/b,d=e.settings.width/e.settings.height,f=b/e.settings.height;return c>=d&&(f=a/e.settings.width),console.log("proportion: "+f),f},j=function(){var b=0|(e.el.width()>>1)-(a("#"+e.settings.videoid).width()>>1),c=0|(e.el.height()>>1)-(a("#"+e.settings.videoid).height()>>1);return"centerXY"==e.settings.align?(a("#"+e.settings.videoid).css({left:b,top:c}),void 0):"centerX"==e.settings.align?(a("#"+e.settings.videoid).css("left",b),void 0):"centerY"==e.settings.align?(a("#"+e.settings.videoid).css("top",c),void 0):void 0};f(),a(window).resize(function(){h()}),a("#"+e.settings.videoid).bind("ended",function(){this.play()})}}(Zepto||jQuery);
